[{"path":"https://cdcgov.github.io/cfa-gam-rt/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to RtGam","title":"Contributing to RtGam","text":"outlines propose change RtGam.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/CONTRIBUTING.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to RtGam","text":"can fix typos, spelling mistakes, grammatical errors documentation directly using GitHub web interface, long changes made source file. generally means ’ll need edit roxygen2 comments .R, .Rd file. can find .R file generates .Rd reading comment first line.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/CONTRIBUTING.html","id":"bigger-changes","dir":"","previous_headings":"","what":"Bigger changes","title":"Contributing to RtGam","text":"want make bigger change, ’s good idea first file issue make sure someone team agrees ’s needed. ’ve found bug, please file issue illustrates bug minimal reprex (also help write unit test, needed). See guide create great issue advice.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"Bigger changes","what":"Pull request process","title":"Contributing to RtGam","text":"Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"CDCgov/cfa-gam-rt\", fork = TRUE). Install development dependencies devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style described https://style.tidyverse.org/news.html.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/CONTRIBUTING.html","id":"code-style","dir":"","previous_headings":"Bigger changes","what":"Code style","title":"Contributing to RtGam","text":"New code follow tidyverse style guide. can use styler package apply styles, please don’t restyle code nothing PR. use roxygen2, Markdown syntax, documentation. use testthat unit tests. Contributions test cases included easier accept.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to RtGam","text":"Please note RtGam project released Contributor Code Conduct. contributing project agree abide terms.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/SUPPORT.html","id":null,"dir":"","previous_headings":"","what":"Getting help with RtGam","title":"Getting help with RtGam","text":"Thanks using RtGam! filing issue, places explore pieces put together make process smooth possible.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/SUPPORT.html","id":"make-a-reprex","dir":"","previous_headings":"","what":"Make a reprex","title":"Getting help with RtGam","text":"Start making minimal reproducible example using reprex package. haven’t heard used reprex , ’re treat! Seriously, reprex make R-question-asking endeavors easier (pretty insane ROI five ten minutes ’ll take learn ’s ). additional reprex pointers, check Get help! section tidyverse site.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/SUPPORT.html","id":"where-to-ask","dir":"","previous_headings":"","what":"Where to ask?","title":"Getting help with RtGam","text":"File issue! opening new issue, sure search issues pull requests make sure bug hasn’t reported /already fixed development version. default, search pre-populated :issue :open. can edit qualifiers (e.g. :pr, :closed) needed. example, ’d simply remove :open search issues repo, open closed.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/articles/RtGam.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Introduction to RtGam","text":"vignette assumes RtGam package installed loaded. vignette uses ggplot2.","code":"# Install with remotes::install_github(\"CDCGov/cfa-gam-rt\") library(RtGam) library(ggplot2)"},{"path":"https://cdcgov.github.io/cfa-gam-rt/articles/RtGam.html","id":"data","dir":"Articles","previous_headings":"","what":"Data","title":"Introduction to RtGam","text":"RtGam package requires time series observed incident case counts. demonstration purposes, package includes simulated epidemic dataset, stochastic_sir_rt, adapted Gostic et al. (2020). example dataset, obs_incidence vector observed case counts, date corresponding vector dates. dataset timeseries 299 days ’ll subset 60 days make plotting easier.  dataset simulated, know true \\(R_t\\) generated epidemic timeseries.  dataset see ?stochastic_sir_rt.","code":"data <- stochastic_sir_rt[41:100, ] ggplot(data) +   geom_point(aes(date, obs_incidence)) +   theme_bw() +   labs(x = \"Reference date\", y = \"Observed cases\") ggplot(data) +   geom_point(aes(date, true_rt)) +   theme_bw() +   labs(x = \"Reference date\", y = \"True Rt\") +   scale_y_continuous(     trans = \"log\",     labels = scales::number_format(accuracy = 0.01)   )"},{"path":"https://cdcgov.github.io/cfa-gam-rt/articles/RtGam.html","id":"fitting-the-model","dir":"Articles","previous_headings":"","what":"Fitting the Model","title":"Introduction to RtGam","text":"fit RtGam model, provide vector observed case counts corresponding dates. model can automatically select hyperparameters like smoothing basis dimension penalty basis dimension. select smoothing penalty basis dimension can provide parameters model. penalty basis dimension can specified k argument smooth basis dimension can specified m argument. example, can decrease penalty basis dimension model setting m 1. See smooth_dim_heuristic() penalty_dim_heuristic() basis dimensions set change . Note RtGam throws warnings diagnostic issues detected. See ?RtGam details specify model ?check_diagnostics model diagnostics.","code":"fit <- RtGam(   cases = data[[\"obs_incidence\"]],   reference_date = data[[\"date\"]] ) print(fit) #> =============================== #> Fitted RtGam model object (gam) #> =============================== #>  #> Model type: Adaptive (m = 3) #> Specified maximum smoothing basis dimension: 25  #> Family: Negative Binomial(11.704)  #> Link function: log #> =============================== #>  #> Observed data points: 60 #> Distinct reference dates: 60 #> Distinct groups: 1 fit_non_adaptive <- RtGam(   cases = data[[\"obs_incidence\"]],   reference_date = data[[\"date\"]],   m = 1 ) print(fit_non_adaptive) #> =============================== #> Fitted RtGam model object (gam) #> =============================== #>  #> Model type: Non-adaptive (m = 1) #> Specified maximum smoothing basis dimension: 25  #> Family: Negative Binomial(11.702)  #> Link function: log #> =============================== #>  #> Observed data points: 60 #> Distinct reference dates: 60 #> Distinct groups: 1"},{"path":[]},{"path":"https://cdcgov.github.io/cfa-gam-rt/articles/RtGam.html","id":"posterior-predicted-cases","dir":"Articles","previous_headings":"Analyzing Results","what":"Posterior predicted cases","title":"Introduction to RtGam","text":"predict() method draws samples posterior distribution fitted model. default draws 100 sampled timeseries posterior predicted cases. Calling plot fitted model object also draws posterior samples plots provided timeseries cases.","code":"head(predict(fit)) #>   reference_date .response .draw #> 1     2023-02-10      1244     1 #> 2     2023-02-10      2010    86 #> 3     2023-02-10       659    84 #> 4     2023-02-10      1235    82 #> 5     2023-02-10      1385    80 #> 6     2023-02-10       744    24 plot(fit)"},{"path":"https://cdcgov.github.io/cfa-gam-rt/articles/RtGam.html","id":"expected-r_t","dir":"Articles","previous_headings":"Analyzing Results","what":"Expected \\(R_t\\)","title":"Introduction to RtGam","text":"Producing estimate \\(R_t\\) requires additional information. needs mean_delay, expected number days case’s infection case counted. example timeseries hospitalizations, ’s average number days infection hospitalized. also requires estimate generation interval, can drawn literature estimated separately using data paired cases. RtGam expects GI formatted probability mass function. recommend using package primarycensored format known generation interval distribution PMF. probability mass function first element dropped replaced 0 underlying renewal-equation based approach assumes -day transmission. simulated example, cases observed immediately mean delay 0. pre-generated generation interval probability mass function (see ?sir_gt_pmf).","code":"plot(   fit,   parameter = \"Rt\",   mean_delay = 0,   gi_pmf = sir_gt_pmf )"},{"path":"https://cdcgov.github.io/cfa-gam-rt/articles/RtGam.html","id":"model-validation","dir":"Articles","previous_headings":"","what":"Model validation","title":"Introduction to RtGam","text":"Comparing posterior draws fitted model posterior simulated ground truth suggests model able recover \\(R_t\\) timeseries. model able identify correctly time sharp drop \\(R_t\\) early March. However, can see model high uncertainty initialization struggles adjust abrupt increase \\(R_t\\) early April.  Future development effort aim improve model performance challenging datasets like example.","code":"plot(   fit,   parameter = \"Rt\",   mean_delay = 0,   gi_pmf = sir_gt_pmf ) +   geom_point(aes(date, true_rt), data = data)"},{"path":"https://cdcgov.github.io/cfa-gam-rt/articles/RtGam.html","id":"additional-resources","dir":"Articles","previous_headings":"","what":"Additional Resources","title":"Introduction to RtGam","text":"provide feedback ask questions, refer package’s GitHub repository. Note: package early development. Outputs may misleading incorrect. Use caution refer repository updates.","code":""},{"path":[]},{"path":"https://cdcgov.github.io/cfa-gam-rt/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Zachary Susswein. Author, maintainer. Katelyn Gostic. Author. Sam Abbott. Author.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Susswein Z, Gostic K, Abbott S (2024). RtGam: Estimating Rt Generalized Additive Models. R package version 0.2.0, https://cdcgov.github.io/cfa-gam-rt/, https://github.com/cdcgov/cfa-gam-rt.","code":"@Manual{,   title = {RtGam: Estimating Rt with Generalized Additive Models},   author = {Zachary Susswein and Katelyn Gostic and Sam Abbott},   year = {2024},   note = {R package version 0.2.0,     https://cdcgov.github.io/cfa-gam-rt/},   url = {https://github.com/cdcgov/cfa-gam-rt}, }"},{"path":"https://cdcgov.github.io/cfa-gam-rt/index.html","id":"rtgam-estimating-r_t-with-generalized-additive-models","dir":"","previous_headings":"","what":"Estimating Rt with Generalized Additive Models","title":"Estimating Rt with Generalized Additive Models","text":"[!CAUTION] project early-stage work--progress. outputs may misleading even incorrect. Despite project’s early stage, development public part Center Forecasting Outbreak Analytics’ goals around open development. Questions suggestions welcome GitHub issues PR.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Estimating Rt with Generalized Additive Models","text":"project -development R package \\(R_t\\) estimation using generalized additive models (GAMs). last years, GAMs used success estimate epidemic growth rates nowcast cases (see Ward, 2021 Mellor, 2023 overview methods). GAM-based models enable rapid, adaptable prototyping, testing different model structures data sources minimal computational development cost. R package {mgcv} provides flexible, fast, robust interface fit penalized-spline based models. However, substantial research effort spline-based approaches unified shared R package. R package aims become opinionated re-implementation literature methods, focus enabling hierarchical modeling. Development effort optimized around real-time use-cases, potential right-truncation, noisy reporting, uncertain data-generating processes. meant simple drop-tool run alongside computationally intensive implementations like {EpiNow2}. moment, package simple functionality fit adaptive smooth trend single epidemic timeseries produce short forecast. yet benchmarked relative approaches.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Estimating Rt with Generalized Additive Models","text":"package can installed GitHub:","code":"remotes::install_github(\"cdcgov/cfa-gam-rt@v0.2.0\")"},{"path":"https://cdcgov.github.io/cfa-gam-rt/index.html","id":"use","dir":"","previous_headings":"","what":"Use","title":"Estimating Rt with Generalized Additive Models","text":"package can used fit smooth trends time noisy epidemic data. includes simulated dataset Gostic et al., 2020 “Practical considerations measuring effective reproductive number, \\(R_t\\)”. snippet uses simulated dataset demonstrate use main model-fitting function: , see Getting started vignette.","code":"library(RtGam)  fit <- RtGam(         cases = stochastic_sir_rt[[\"obs_incidence\"]],         # Randomly chosen date         reference_date = stochastic_sir_rt[[\"date\"]]        ) print(fit)"},{"path":"https://cdcgov.github.io/cfa-gam-rt/index.html","id":"project-admin","dir":"","previous_headings":"","what":"Project Admin","title":"Estimating Rt with Generalized Additive Models","text":"Zachary Susswein (@zsusswein) Katelyn Gostic (@kgostic) Sam Abbott (@seabbs)","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/index.html","id":"general-disclaimer","dir":"","previous_headings":"","what":"General Disclaimer","title":"Estimating Rt with Generalized Additive Models","text":"repository created use CDC programs collaborate public health related projects support CDC mission. GitHub hosted CDC, third party website used CDC partners share information collaborate software. CDC use GitHub imply endorsement one particular service, product, enterprise.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/index.html","id":"public-domain-standard-notice","dir":"","previous_headings":"","what":"Public Domain Standard Notice","title":"Estimating Rt with Generalized Additive Models","text":"repository constitutes work United States Government subject domestic copyright protection 17 USC § 105. repository public domain within United States, copyright related rights work worldwide waived CC0 1.0 Universal public domain dedication. contributions repository released CC0 dedication. submitting pull request agreeing comply waiver copyright interest.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/index.html","id":"license-standard-notice","dir":"","previous_headings":"","what":"License Standard Notice","title":"Estimating Rt with Generalized Additive Models","text":"repository licensed ASL v2 later. source code repository free: can redistribute /modify terms Apache Software License version 2, (option) later version. source code repository distributed hope useful, WITHOUT WARRANTY; without even implied warranty MERCHANTABILITY FITNESS PARTICULAR PURPOSE. See Apache Software License details. received copy Apache Software License along program. , see http://www.apache.org/licenses/LICENSE-2.0.html source code forked open source projects inherit license.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/index.html","id":"privacy-standard-notice","dir":"","previous_headings":"","what":"Privacy Standard Notice","title":"Estimating Rt with Generalized Additive Models","text":"repository contains non-sensitive, publicly available data information. material community participation covered Disclaimer Code Conduct. information CDC’s privacy policy, please visit http://www.cdc.gov//privacy.html.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/index.html","id":"contributing-standard-notice","dir":"","previous_headings":"","what":"Contributing Standard Notice","title":"Estimating Rt with Generalized Additive Models","text":"Anyone encouraged contribute repository forking submitting pull request. (new GitHub, might start basic tutorial.) contributing project, grant world-wide, royalty-free, perpetual, irrevocable, non-exclusive, transferable license users terms Apache Software License v2 later. comments, messages, pull requests, submissions received CDC including GitHub page may subject applicable federal law, including limited Federal Records Act, may archived. Learn http://www.cdc.gov//privacy.html.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/index.html","id":"records-management-standard-notice","dir":"","previous_headings":"","what":"Records Management Standard Notice","title":"Estimating Rt with Generalized Additive Models","text":"repository source government records copy increase collaboration collaborative potential. government records published CDC web site.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/index.html","id":"additional-standard-notices","dir":"","previous_headings":"","what":"Additional Standard Notices","title":"Estimating Rt with Generalized Additive Models","text":"Please refer CDC’s Template Repository information contributing repository, public domain notices disclaimers, code conduct.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/RtGam.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a generalized additive model to incident cases — RtGam","title":"Fit a generalized additive model to incident cases — RtGam","text":"Incident cases modeled smooth function time generalized additive model (GAM). model fit mgcv::gam() familiarity mgcv may helpful.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/RtGam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a generalized additive model to incident cases — RtGam","text":"","code":"RtGam(   cases,   reference_date,   group = NULL,   k = smooth_dim_heuristic(length(cases)),   m = penalty_dim_heuristic(length(unique(reference_date))),   backend = \"gam\",   warn_for_diagnostic_failure = TRUE,   ... )"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/RtGam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a generalized additive model to incident cases — RtGam","text":"cases vector non-negative incident case counts occurring associated reference_date. Missing values (NAs) allowed. reference_date associated date count incident cases occurred. Missing dates allowed dates can occur . group grouping variable case/reference-date pair. yet implemented value NULL throw error. k integer, total dimension smoothing basis functions. Defaults smooth_dim_heuristic(length(cases)), picks reasonable estimate based number provided data points. total dimension partitioned different smooths model. case diagnostic issues fitted RtGam model, increasing value k default refitting model good first step. See smooth_dim_heuristic() documentation information. m integer, dimension penalty basis global smooth trend. m greater 1, smooth's wiggliness can change time. increase value default done carefully. See penalty_dim_heuristic() information m consider changing default. backend One gam bam; defaults gam. general, models fit mgcv::gam(). mgcv::gam() slow, mgcv::bam() converges quickly introduces additional numerical error. Note bam backend uses discrete = TRUE option additional speedup. See mgcv::bam() information. warn_for_diagnostic_failure warnings issued automatically identified diagnostic issues? Defaults TRUE. list quantitative model diagnostics can inspected diagnostics slot returned RtGam object. ... Additional arguments passed specified modeling backend. example, default negative binomial error structure changed poisson default mgcv::gam backend passing family = \"poisson\".","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/RtGam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a generalized additive model to incident cases — RtGam","text":"fitted model object type RtGam. object named elements: model: fitted mgcv model object data: processed data.frame used fit RtGam model min_date max_date: minimum maximum reference_date provided k: user-provided k argument m: user-provided m argument backend: user-provided backend argument formula: formula object provided model diagnostics: quantitative diagnostics model fit","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/RtGam.html","id":"model-specification","dir":"Reference","previous_headings":"","what":"Model specification","title":"Fit a generalized additive model to incident cases — RtGam","text":"Incident cases (\\(y\\)) modeled smoothly changing time: $$\\text{log}\\{E(y)\\} = \\alpha + f_{\\text{global}}(t)$$ incidence negative-binomially distributed \\(f(t)\\) smooth function time.","code":""},{"path":[]},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/RtGam.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit a generalized additive model to incident cases — RtGam","text":"","code":"withr::with_seed(12345, {   cases <- rpois(20, 10) }) reference_date <- seq.Date(   from = as.Date(\"2023-01-01\"),   length.out = 20,   by = \"day\" ) fit <- RtGam(cases, reference_date) fit #> =============================== #> Fitted RtGam model object (gam) #> =============================== #>  #> Model type: Non-adaptive (m = 1) #> Specified maximum smoothing basis dimension: 15  #> Family: Negative Binomial(993826.867)  #> Link function: log #> =============================== #>  #> Observed data points: 20 #> Distinct reference dates: 20 #> Distinct groups: 1 #>"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/check_diagnostics.html","id":null,"dir":"Reference","previous_headings":"","what":"Check quantitative diagnostics from a fitted RtGam model — check_diagnostics","title":"Check quantitative diagnostics from a fitted RtGam model — check_diagnostics","text":"Evaluates convergence, effective degrees freedom, residual autocorrelation. warn_for_diagnostic_failure set TRUE, issue warnings potential diagnostic issues detected. diagnostics invisibly returned list also stored within diagnostics element provided model object.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/check_diagnostics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check quantitative diagnostics from a fitted RtGam model — check_diagnostics","text":"","code":"check_diagnostics(fit, warn_for_diagnostic_failure = TRUE)"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/check_diagnostics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check quantitative diagnostics from a fitted RtGam model — check_diagnostics","text":"fit fitted RtGam model object. result calling RtGam::RtGam() appropriate data. warn_for_diagnostic_failure logical value indicating whether issue warnings diagnostic checks suggest potential issues model fit. Defaults TRUE, meaning warnings issued default.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/check_diagnostics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check quantitative diagnostics from a fitted RtGam model — check_diagnostics","text":"Invisibly returns list containing diagnostic results: model_converged: Logical indicating model converged. k_prime: maximum available number degrees freedom used GAM fit. k_edf: Estimated degrees freedom actually used smooth terms model. k_index: ratio residual variance differenced near-neighbor residuals overall residual variance. near 1 . k_p_value: P-value testing k' adequate modeling data. k_to_edf_ratio: Ratio k' effective degrees freedom smooth terms. k' well available edf. residual_autocorrelation: Autocorrelation coefficients residuals lag 7 one-tenth series length, whichever smaller.","code":""},{"path":[]},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/check_diagnostics.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check quantitative diagnostics from a fitted RtGam model — check_diagnostics","text":"","code":"withr::with_seed(12345, {   cases <- rpois(20, 10) }) reference_date <- seq.Date(   from = as.Date(\"2023-01-01\"),   length.out = 20,   by = \"day\" ) fit <- RtGam::RtGam(cases, reference_date) check_diagnostics(fit)"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/dataset_creator.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse input vectors into a format for {mgcv} — dataset_creator","title":"Parse input vectors into a format for {mgcv} — dataset_creator","text":"Parse input vectors format {mgcv}","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/dataset_creator.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse input vectors into a format for {mgcv} — dataset_creator","text":"","code":"dataset_creator(cases, reference_date, group, backend)"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/dataset_creator.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse input vectors into a format for {mgcv} — dataset_creator","text":"cases vector non-negative incident case counts occurring associated reference_date. Missing values (NAs) allowed. reference_date associated date count incident cases occurred. Missing dates allowed dates can occur . group grouping variable case/reference-date pair. yet implemented value NULL throw error. backend One gam bam; defaults gam. general, models fit mgcv::gam(). mgcv::gam() slow, mgcv::bam() converges quickly introduces additional numerical error. Note bam backend uses discrete = TRUE option additional speedup. See mgcv::bam() information.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/dataset_creator.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse input vectors into a format for {mgcv} — dataset_creator","text":"dataframe mgcv","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/dates_to_timesteps.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert an arbitrary vector of dates to a vector of timesteps — dates_to_timesteps","title":"Convert an arbitrary vector of dates to a vector of timesteps — dates_to_timesteps","text":"*_supplied_date arguments required rather calculated internally function can re-used methods different reference_date vector min max dates. re-use ensures timestep match internally user can just supply dates without knowledge internal timestep representation.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/dates_to_timesteps.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert an arbitrary vector of dates to a vector of timesteps — dates_to_timesteps","text":"","code":"dates_to_timesteps(reference_date, min_supplied_date, max_supplied_date)"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/dates_to_timesteps.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert an arbitrary vector of dates to a vector of timesteps — dates_to_timesteps","text":"reference_date associated date count incident cases occurred. Missing dates allowed dates can occur . min_supplied_date minimum date supplied reference_date class constructor. max_supplied_date maximum date supplied reference_date class constructor.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/dates_to_timesteps.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert an arbitrary vector of dates to a vector of timesteps — dates_to_timesteps","text":"vector timesteps, corresponding supplied reference dates","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/dates_to_timesteps.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert an arbitrary vector of dates to a vector of timesteps — dates_to_timesteps","text":"Timesteps scaled [0, 1]. small range intentional – seen help numerical samplers converge default R recent dates large integers.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/parse_predict_dates.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert from user specification to necessary date range — parse_predict_dates","title":"Convert from user specification to necessary date range — parse_predict_dates","text":"Convert user specification necessary date range","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/parse_predict_dates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert from user specification to necessary date range — parse_predict_dates","text":"","code":"parse_predict_dates(   object,   min_date = NULL,   max_date = NULL,   horizon = NULL,   call = rlang::caller_env() )"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/parse_predict_dates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert from user specification to necessary date range — parse_predict_dates","text":"object RtGam object created using RtGam() function. min_date, max_date Optional. Date-like objects specifying start end prediction range. See Details information usage. horizon Optional. integer indicating number days forecast beyond last date model fit. example, horizon = 7 predicts next 7 days. call calling environment reflected error message","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/parse_predict_dates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert from user specification to necessary date range — parse_predict_dates","text":"List two elements: min_date max_date","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/penalty_dim_heuristic.html","id":null,"dir":"Reference","previous_headings":"","what":"Propose penalty basis dimension from the number of distinct dates — penalty_dim_heuristic","title":"Propose penalty basis dimension from the number of distinct dates — penalty_dim_heuristic","text":"Return reasonable value m argument RtGam() based number dates cases observed. m argument controls dimension smoothing penalty basis model's global smooth trend (see Model specification section RtGam() documentation information global trend). penalty basis dimension controls much wiggliness global smooth trend can vary time. Higher values m help model adapt quickly different epidemic regimes, computationally costly.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/penalty_dim_heuristic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Propose penalty basis dimension from the number of distinct dates — penalty_dim_heuristic","text":"","code":"penalty_dim_heuristic(n)"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/penalty_dim_heuristic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Propose penalty basis dimension from the number of distinct dates — penalty_dim_heuristic","text":"n integer, number dates associated case observation.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/penalty_dim_heuristic.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Propose penalty basis dimension from the number of distinct dates — penalty_dim_heuristic","text":"integer, proposed penalty basis dimension used global trend.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/penalty_dim_heuristic.html","id":"how-m-is-used","dir":"Reference","previous_headings":"","what":"How m is used","title":"Propose penalty basis dimension from the number of distinct dates — penalty_dim_heuristic","text":"parameter m controls penalty basis dimension model's global smooth trend. m 1, single constant penalty wiggliness entire smooth RtGam use thin-plate spline basis superior performance single-penalty settings. m 2 , model use m distinct penalties smooth trend's wiggliness use adaptive spline basis. realized penalty timepoint smoothly interpolates m estimated wiggliness penalties. adaptive penalty increases computational cost model, allows single model adapt changing epidemic dynamics without oversmoothing introducing spurious wiggly trends.","code":""},{"path":[]},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/penalty_dim_heuristic.html","id":"very-slow","dir":"Reference","previous_headings":"","what":"Very slow","title":"Propose penalty basis dimension from the number of distinct dates — penalty_dim_heuristic","text":"Decreasing penalty basis dimension makes model less demanding fit. mgcv describes adaptive penalty 10 basis dimensions 200 data points roughly equivalent fitting 10 GAMs 20 data points. Using single penalty throughout model much simpler using adaptive smooth preferred possible. See [mgcv::smooth.construct.ad.smooth.spec] information adaptive smooth basis uses penalty dimension.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/penalty_dim_heuristic.html","id":"observed-over-smoothing-of-non-stationary-data","dir":"Reference","previous_headings":"","what":"Observed over-smoothing of non-stationary data","title":"Propose penalty basis dimension from the number of distinct dates — penalty_dim_heuristic","text":"fitted model observably -smoothing, may reasonable refit higher penalty basis dimension. Moments sudden change epidemic dynamics, sharp epidemic peak, can challenging fit smooth functions. option used care due increased computational cost.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/penalty_dim_heuristic.html","id":"implementation-details","dir":"Reference","previous_headings":"","what":"Implementation details","title":"Propose penalty basis dimension from the number of distinct dates — penalty_dim_heuristic","text":"algorithm pick m \\(\\lfloor \\frac{n}{21} \\rfloor + 1\\) \\(n \\\\mathbb{W}\\) number observed dates. algorithm assumes 21-day period, epidemic dynamics remain roughly similarly wiggly. Sharp jumps drops requiring wiggly trend remain similarly plausible much 21-day band.","code":""},{"path":[]},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/penalty_dim_heuristic.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Propose penalty basis dimension from the number of distinct dates — penalty_dim_heuristic","text":"","code":"# Default use invokes `unique()` in case of repeated dates from groups reference_date <- as.Date(c(\"2023-01-01\", \"2023-01-02\", \"2023-01-03\")) m <- penalty_dim_heuristic(length(reference_date))"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/plot.RtGam.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot method for RtGam fits — plot.RtGam","title":"Plot method for RtGam fits — plot.RtGam","text":"Generates predicted draws predict.RtGam plots ggplot2. See documentation predict.RtGam options specify draws.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/plot.RtGam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot method for RtGam fits — plot.RtGam","text":"","code":"# S3 method for class 'RtGam' plot(x, parameter = \"obs_cases\", alpha = 0.05, ...)"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/plot.RtGam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot method for RtGam fits — plot.RtGam","text":"x RtGam object created using RtGam() function. parameter character string specifying prediction target. Options \"obs_cases\" (observed cases), \"r\" (growth rate), \"Rt\" (reproduction number). Default \"obs_cases\". alpha opacity lines plot. 0 1, values closer 0 producing transparent lines. ... Additional options pass predict.RtGam()","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/plot.RtGam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot method for RtGam fits — plot.RtGam","text":"ggplot2 object","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/plot.RtGam.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot method for RtGam fits — plot.RtGam","text":"","code":"fit <- RtGam(   stochastic_sir_rt[[\"obs_incidence\"]],   stochastic_sir_rt[[\"date\"]] ) # Plot draws from the fitted model against the data plot(fit)   # Plot a 7-day forecast plot(fit, horizon = 7)   # Plot Rt estimates plot(fit,   parameter = \"Rt\",   mean_delay = 0,   gi_pmf = sir_gt_pmf )"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/predict.RtGam.html","id":null,"dir":"Reference","previous_headings":"","what":"Draw posterior samples from a fitted RtGam model — predict.RtGam","title":"Draw posterior samples from a fitted RtGam model — predict.RtGam","text":"Generate posterior draws RtGam fit. Prediction dates can specified flexibly using various approaches, predictions can drawn different model parameters.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/predict.RtGam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Draw posterior samples from a fitted RtGam model — predict.RtGam","text":"","code":"# S3 method for class 'RtGam' predict(   object,   parameter = \"obs_cases\",   horizon = NULL,   min_date = NULL,   max_date = NULL,   n = 100,   mean_delay = NULL,   gi_pmf = NULL,   seed = 12345,   ... )"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/predict.RtGam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Draw posterior samples from a fitted RtGam model — predict.RtGam","text":"object RtGam object created using RtGam() function. parameter character string specifying prediction target. Options \"obs_cases\" (observed cases), \"r\" (growth rate), \"Rt\" (reproduction number). Default \"obs_cases\". horizon Optional. integer indicating number days forecast beyond last date model fit. example, horizon = 7 predicts next 7 days. min_date, max_date Optional. Date-like objects specifying start end prediction range. See Details information usage. n integer specifying number posterior samples use predictions. Default 100. mean_delay Optional. integer specifying mean number days individual becoming infected case observed (e.g., emergency department visit hospitalization). value shifts predictions account reporting delays. required predicting \"r\" (growth rate) \"Rt\" (reproduction number). gi_pmf Optional. numeric vector specifying generation interval probability mass function (PMF), required parameter = \"Rt\". PMF must proper probability distribution (summing one) first element set zero exclude -day transmission, required renewal equation. information tools handle delay distributions, see primarycensored package. seed integer specifying random seed reproducibility. Default 12345. ... Additional arguments passed underlying sampling functions: parameter = \"obs_cases\", arguments passed gratia: posterior_samples. parameter = \"r\" \"Rt\", arguments passed gratia: fitted_samples.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/predict.RtGam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Draw posterior samples from a fitted RtGam model — predict.RtGam","text":"data frame tidy format, row represents posterior draw specific date, following columns: reference_date: prediction date. .response: predicted value target parameter. .draw: index posterior draw. Example output:","code":"reference_date .response .draw 1     2023-01-01        18     1 2     2023-01-02        13     1 3     2023-01-03        21     1 4     2023-01-01        11     2 5     2023-01-02        19     2 6     2023-01-03        24     2"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/predict.RtGam.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Draw posterior samples from a fitted RtGam model — predict.RtGam","text":"Prediction dates can defined four ways: Default Date Range: using fit object, predictions made across full date range original model. Using horizon: Extends predictions horizon days beyond last date model fit. Using min_date horizon: Predictions start min_date extend horizon days fit’s last date. Using min_date max_date: Generates predictions dates within specified range, inclusive. mean_delay parameter adjusts predictions temporal lag infection case observation. example, mean_delay = 5, model assumes observed cases reflect infections occurred average five days earlier. adjustment ensures estimates growth rates (\"r\") reproduction numbers (\"Rt\") align correct underlying temporal dynamics. parameter argument determines type predictions: \"obs_cases\": Observed cases, including uncertainty model's fit. \"r\": Growth rate, calculated using centered difference time steps. \"Rt\": Reproduction number, incorporating delay distributions convolution. Samples drawn posterior distribution fitted model using gratia package. model estimates basis function coefficients smooth terms \\(\\hat \\beta\\) smoothing parameter(s) \\(\\lambda\\). coefficients joint posterior distribution $$\\beta | \\lambda \\sim N(\\hat \\beta, \\mathbf{V}_{\\hat \\beta}$$ \\(\\mathbf{V}_{\\hat \\beta}\\) smoothing-parameter uncertainty corrected covariance matrix basis function coefficients. draw samples \\(\\mathbf{V}_{\\hat \\beta}\\) multiply dates interest generate posterior draws. intrinsic growth rate, draw one day one day every day interest. difference two days within smooth get growth period divide two generate discrete centered derivative. Rt map estimated values linear predictor scale back response scale shift estimated cases mean delay get estimated incident infections (\\(\\)). use incident infections generation interval probability mass function (\\(w\\)) estimate Rt via Cori method: $$I_t / \\sum_{s = 1}^t{I_{t - s} w_s}$$ observed incident cases, apply estimated negative binomial observation error posterior expected incident cases generate posterior predicted incident cases.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/predict.RtGam.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Draw posterior samples from a fitted RtGam model — predict.RtGam","text":"Miller, David L. \"Bayesian views generalized additive modelling.\" arXiv preprint arXiv:1902.01330 (2019). Gostic, Katelyn M., et al. \"Practical considerations measuring effective reproductive number, R t.\" PLoS computational biology 16.12 (2020): e1008409. Simpson, Gavin L. \"Gratia: R package exploring generalized additive models.\" arXiv preprint arXiv:2406.19082 (2024). Cori , Ferguson NM, Fraser C, Cauchemez S. New Framework Software Estimate Time-Varying Reproduction Numbers Epidemics. J Epidemiol. 2013;178(9):1505–12. pmid:24043437","code":""},{"path":[]},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/predictor.html","id":null,"dir":"Reference","previous_headings":"","what":"Parameter-specific posterior predictions — predictor","title":"Parameter-specific posterior predictions — predictor","text":"Generate posterior draws RtGam fit. Prediction dates can specified flexibly using various approaches, predictions can drawn different model parameters.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/predictor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parameter-specific posterior predictions — predictor","text":"","code":"predict_obs_cases(   object,   horizon = NULL,   min_date = NULL,   max_date = NULL,   n = 10,   gi_pmf = NULL,   seed = 12345,   call = rlang::caller_env(),   ... )  predict_growth_rate(   object,   horizon = NULL,   min_date = NULL,   max_date = NULL,   n = 10,   gi_pmf = NULL,   seed = 12345,   mean_delay,   call = rlang::caller_env(),   ... )  predict_rt(   object,   horizon = NULL,   min_date = NULL,   max_date = NULL,   n = 10,   gi_pmf = NULL,   seed = 12345,   mean_delay,   call = rlang::caller_env(),   ... )"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/predictor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parameter-specific posterior predictions — predictor","text":"object RtGam object created using RtGam() function. horizon Optional. integer indicating number days forecast beyond last date model fit. example, horizon = 7 predicts next 7 days. min_date, max_date Optional. Date-like objects specifying start end prediction range. See Details information usage. n integer specifying number posterior samples use predictions. Default 100. gi_pmf Optional. numeric vector specifying generation interval probability mass function (PMF), required parameter = \"Rt\". PMF must proper probability distribution (summing one) first element set zero exclude -day transmission, required renewal equation. information tools handle delay distributions, see primarycensored package. seed integer specifying random seed reproducibility. Default 12345. call calling environment pass error messages ... Additional arguments passed underlying sampling functions: parameter = \"obs_cases\", arguments passed gratia: posterior_samples. parameter = \"r\" \"Rt\", arguments passed gratia: fitted_samples. mean_delay Optional. integer specifying mean number days individual becoming infected case observed (e.g., emergency department visit hospitalization). value shifts predictions account reporting delays. required predicting \"r\" (growth rate) \"Rt\" (reproduction number).","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/predictor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parameter-specific posterior predictions — predictor","text":"data frame tidy format, row represents posterior draw specific date, following columns: reference_date: prediction date. .response: predicted value target parameter. .draw: index posterior draw. Example output:","code":"reference_date .response .draw 1     2023-01-01        18     1 2     2023-01-02        13     1 3     2023-01-03        21     1 4     2023-01-01        11     2 5     2023-01-02        19     2 6     2023-01-03        24     2"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/predictor.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Parameter-specific posterior predictions — predictor","text":"Prediction dates can defined four ways: Default Date Range: using fit object, predictions made across full date range original model. Using horizon: Extends predictions horizon days beyond last date model fit. Using min_date horizon: Predictions start min_date extend horizon days fit’s last date. Using min_date max_date: Generates predictions dates within specified range, inclusive. mean_delay parameter adjusts predictions temporal lag infection case observation. example, mean_delay = 5, model assumes observed cases reflect infections occurred average five days earlier. adjustment ensures estimates growth rates (\"r\") reproduction numbers (\"Rt\") align correct underlying temporal dynamics. parameter argument determines type predictions: \"obs_cases\": Observed cases, including uncertainty model's fit. \"r\": Growth rate, calculated using centered difference time steps. \"Rt\": Reproduction number, incorporating delay distributions convolution. Samples drawn posterior distribution fitted model using gratia package. model estimates basis function coefficients smooth terms \\(\\hat \\beta\\) smoothing parameter(s) \\(\\lambda\\). coefficients joint posterior distribution $$\\beta | \\lambda \\sim N(\\hat \\beta, \\mathbf{V}_{\\hat \\beta}$$ \\(\\mathbf{V}_{\\hat \\beta}\\) smoothing-parameter uncertainty corrected covariance matrix basis function coefficients. draw samples \\(\\mathbf{V}_{\\hat \\beta}\\) multiply dates interest generate posterior draws. intrinsic growth rate, draw one day one day every day interest. difference two days within smooth get growth period divide two generate discrete centered derivative. Rt map estimated values linear predictor scale back response scale shift estimated cases mean delay get estimated incident infections (\\(\\)). use incident infections generation interval probability mass function (\\(w\\)) estimate Rt via Cori method: $$I_t / \\sum_{s = 1}^t{I_{t - s} w_s}$$ observed incident cases, apply estimated negative binomial observation error posterior expected incident cases generate posterior predicted incident cases.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/predictor.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Parameter-specific posterior predictions — predictor","text":"Miller, David L. \"Bayesian views generalized additive modelling.\" arXiv preprint arXiv:1902.01330 (2019). Gostic, Katelyn M., et al. \"Practical considerations measuring effective reproductive number, R t.\" PLoS computational biology 16.12 (2020): e1008409. Simpson, Gavin L. \"Gratia: R package exploring generalized additive models.\" arXiv preprint arXiv:2406.19082 (2024). Cori , Ferguson NM, Fraser C, Cauchemez S. New Framework Software Estimate Time-Varying Reproduction Numbers Epidemics. J Epidemiol. 2013;178(9):1505–12. pmid:24043437","code":""},{"path":[]},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/print.RtGam.html","id":null,"dir":"Reference","previous_headings":"","what":"Print an RtGam object — print.RtGam","title":"Print an RtGam object — print.RtGam","text":"Print RtGam object","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/print.RtGam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print an RtGam object — print.RtGam","text":"","code":"# S3 method for class 'RtGam' print(x, ...)"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/print.RtGam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print an RtGam object — print.RtGam","text":"x Fitted model object class RtGam ... arguments passed methods. ignored function.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/print.RtGam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print an RtGam object — print.RtGam","text":"RtGam object, invisibly","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/print.RtGam.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Print an RtGam object — print.RtGam","text":"","code":"withr::with_seed(12345, {   cases <- rpois(20, 10) }) reference_date <- seq.Date(   from = as.Date(\"2023-01-01\"),   length.out = 20,   by = \"day\" ) fit <- RtGam::RtGam(cases, reference_date) print(fit) #> =============================== #> Fitted RtGam model object (gam) #> =============================== #>  #> Model type: Non-adaptive (m = 1) #> Specified maximum smoothing basis dimension: 15  #> Family: Negative Binomial(993826.867)  #> Link function: log #> =============================== #>  #> Observed data points: 20 #> Distinct reference dates: 20 #> Distinct groups: 1 #>"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/sir_gt_pmf.html","id":null,"dir":"Reference","previous_headings":"","what":"Generation interval corresponding to the sample stochastic_sir_rt dataset — sir_gt_pmf","title":"Generation interval corresponding to the sample stochastic_sir_rt dataset — sir_gt_pmf","text":"Gostic et al., 2020 simulates data stochastic SEIR model. Residence time E compartments exponentially distributed, mean 4 days (rate/inverse-scale 1/4). residence times imply gamma-distributed generation time distribution shape 2 rate 1/4. distribution can regenerated data-raw/sir_gt_pmf.R.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/sir_gt_pmf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generation interval corresponding to the sample stochastic_sir_rt dataset — sir_gt_pmf","text":"","code":"sir_gt_pmf"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/sir_gt_pmf.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Generation interval corresponding to the sample stochastic_sir_rt dataset — sir_gt_pmf","text":"sir_gt_pmf numeric vector length 26 sums one within numerical tolerance","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/sir_gt_pmf.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generation interval corresponding to the sample stochastic_sir_rt dataset — sir_gt_pmf","text":"parametric specification, produce double-censored, left-truncated probability mass function generation interval distribution. produce PMF using primarycensored::dpcens() version 0.4.0. See https://doi.org/10.1101/2024.01.12.24301247 information double-censoring biases corrections.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/smooth_dim_heuristic.html","id":null,"dir":"Reference","previous_headings":"","what":"Propose total smoothing basis dimension from the number of data points — smooth_dim_heuristic","title":"Propose total smoothing basis dimension from the number of data points — smooth_dim_heuristic","text":"Return reasonable value k argument RtGam (total smooth basis dimension model's one smooth predictors) based number data points. smooth basis dimension controls maximum degrees freedom (proxy \"wiggliness\") smooth predictors. estimation procedure leans toward providing excess number degrees freedom model. consequence slower model fits, better chance avoiding avoiding non-convergence due undersmoothing. manually supplying value k rather relying default estimate, see use different value RtGam-specific implementation guidance mgcv::choose.k general debugging guidance underlying model fitting package. Note k may minimum 2 maximum number data points.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/smooth_dim_heuristic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Propose total smoothing basis dimension from the number of data points — smooth_dim_heuristic","text":"","code":"smooth_dim_heuristic(n)"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/smooth_dim_heuristic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Propose total smoothing basis dimension from the number of data points — smooth_dim_heuristic","text":"n integer, dimension data.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/smooth_dim_heuristic.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Propose total smoothing basis dimension from the number of data points — smooth_dim_heuristic","text":"integer, proposed total smooth basis dimensionality available RtGam model.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/smooth_dim_heuristic.html","id":"how-k-is-used","dir":"Reference","previous_headings":"","what":"How k is used","title":"Propose total smoothing basis dimension from the number of data points — smooth_dim_heuristic","text":"model composed one smooth predictors, depending specifics model specification. simple model one smooth predictor, degrees freedom k applied single smooth. complex model composed multiple smooth predictors, total degrees degrees freedom made available k partitioned different smooths.","code":""},{"path":[]},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/smooth_dim_heuristic.html","id":"model-non-convergence","dir":"Reference","previous_headings":"","what":"Model non-convergence","title":"Propose total smoothing basis dimension from the number of data points — smooth_dim_heuristic","text":"RtGam model converge, reasonable first debugging step increase value k refit model. Commonly, GAMs exhibit diagnostic issues model enough flexibility represent underlying data generating process. Increasing k default estimate provides flexibility. However, insufficient flexibility source non-convergence. increasing k improve default model diagnostics, manual model checking via mgcv::gam.check() may needed. Also see mgcv::choose.k guidance.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/smooth_dim_heuristic.html","id":"slow-model-fits","dir":"Reference","previous_headings":"","what":"Slow model fits","title":"Propose total smoothing basis dimension from the number of data points — smooth_dim_heuristic","text":"RtGam models usually fit faster model less flexibility (lower values k). guess smooth_dim_heuristic() leans toward providing excess degrees freedom, model fits may take little longer needed. models taking long time converge, reasonable set k small value, checking convergence, increasing k needed model convergences. approach may may faster simply waiting model higher k fit.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/smooth_dim_heuristic.html","id":"very-wiggly-data","dir":"Reference","previous_headings":"","what":"Very wiggly data","title":"Propose total smoothing basis dimension from the number of data points — smooth_dim_heuristic","text":"running models setting data seem quite wiggly, exhibiting sharp jumps drops, model flexibility normal may needed. k increased maximum possible value. running pre-set models production, also reasonable fix value k default. GAMs penalize model wiggliness, fit wiggly non-wiggly data likely satisfactory, cost increased runtime.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/smooth_dim_heuristic.html","id":"implementation-details","dir":"Reference","previous_headings":"","what":"Implementation details","title":"Propose total smoothing basis dimension from the number of data points — smooth_dim_heuristic","text":"algorithm pick k piecewise function. \\(n \\le 10\\), returned value \\(n\\). \\(n > 10\\), returned value \\( \\lceil \\sqrt{10n} \\rceil \\). approach loosely inspired Ward et al., 2021. Ward et al. degrees freedom spline (1) set reasonably high value avoid oversmoothing (2) scales dimension data accommodate changing trends time. smooth_dim_heuristic() uses piecewise function smooth parameter needs degrees freedom, adds fixed initial setup cost. dimension data small, default value k increases linearly data accommodate fixed setup cost. dimension data larger, default value k increases square root data balance sufficient basis dimension fit changing trends time without many dimensions model fits slow.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/smooth_dim_heuristic.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Propose total smoothing basis dimension from the number of data points — smooth_dim_heuristic","text":"Ward, Thomas, et al. \"Growth, reproduction numbers factors affecting spread SARS-CoV-2 novel variants concern UK October 2020 July 2021: modeling analysis.\" BMJ open 11.11 (2021): e056636.","code":""},{"path":[]},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/smooth_dim_heuristic.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Propose total smoothing basis dimension from the number of data points — smooth_dim_heuristic","text":"","code":"cases <- 1:10 k <- smooth_dim_heuristic(length(cases))"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/stochastic_sir_rt.html","id":null,"dir":"Reference","previous_headings":"","what":"Synthetic dataset of stochastic SIR system with known Rt — stochastic_sir_rt","title":"Synthetic dataset of stochastic SIR system with known Rt — stochastic_sir_rt","text":"dataset Gostic, Katelyn M., et al. \"Practical considerations measuring effective reproductive number, Rt.\" PLoS Computational Biology 16.12 (2020): e1008409. data simulated stochastic SEIR compartmental model.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/stochastic_sir_rt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Synthetic dataset of stochastic SIR system with known Rt — stochastic_sir_rt","text":"","code":"stochastic_sir_rt"},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/stochastic_sir_rt.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Synthetic dataset of stochastic SIR system with known Rt — stochastic_sir_rt","text":"stochastic_sir_rt data frame 301 rows 12 columns: time Timestep discrete-time stochastic SEIR simulation date Added original Gostic, 2020 dataset. date corresponding assigned time. Arbitrarily starts January 1st, 2023. S, E, , R realized state stochastic SEIR system dS, dEI, DIR stochastic transition compartments incidence true incidence compartment time t obs_cases observed number cases time t forward-convolved incidence. obs_incidence Added original Gostic, 2020 dataset. incidence column added negative-binomial observation noise. Created set.seed(123456) call rnbinom(299, mu = [[\"incidence\"]], size = 10) Useful testing. true_r0 initial R0 system (.e., 2) true_rt known, true Rt epidemic system","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/stochastic_sir_rt.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Synthetic dataset of stochastic SIR system with known Rt — stochastic_sir_rt","text":"https://github.com/cobeylab/Rt_estimation/tree/d9d8977ba8492ac1a3b8287d2f470b313bfb9f1d # nolint https://github.com/CDCgov/cfa-epinow2-pipeline/pull/17 # nolint","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/reference/stochastic_sir_rt.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Synthetic dataset of stochastic SIR system with known Rt — stochastic_sir_rt","text":"synthetic dataset number desirable properties: force infection changes depending Rt, allowing sudden changes Rt. allows modeling sudden changes infection dynamics, might otherwise difficult capture. Rt estimation framework realized Rt known timepoint dataset incorporates simple generation interval reporting delay. Gostic et al. benchmark performance number Rt estimation frameworks, providing practical guidance use dataset evaluate Rt estimates. practice, found amount observation noise incidence /observed cases often undesirably low testing. Many empirical datasets much noisier. result, models built settings mind can perform poorly dataset fail converge. manually add observation noise rnbinom(299, mu = stochastic_sir_rt[[\"obs_cases\"]], size = 10) random seed 123456 store obs_incidence column.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/news/index.html","id":"rtgam-v020","dir":"Changelog","previous_headings":"","what":"RtGam v0.2.0","title":"RtGam v0.2.0","text":"release introduces new functionality working RtGam models, including S3 methods prediction plotting. also includes bug fixes, improved handling input data, enhanced developer tooling streamline contributions maintenance.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/news/index.html","id":"features-0-2-0","dir":"Changelog","previous_headings":"","what":"Features","title":"RtGam v0.2.0","text":"Predict method RtGam models, parameters obs_cases, obs_incidence, r, Rt (#48) Plot method RtGam models built predict method (#76) Cast dates passed strings Date possible (#67) New “Getting Started” vignette walking basics use package (#83)","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/news/index.html","id":"bugs-0-2-0","dir":"Changelog","previous_headings":"","what":"Bugs","title":"RtGam v0.2.0","text":"Drop old typos snuck WORDLIST setup (#73) Turn credential caching WORDLIST update action preventing CI restarting (#74) Prepend missing zero start GI PMF sample dataset","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/news/index.html","id":"developer-tooling-0-2-0","dir":"Changelog","previous_headings":"","what":"Developer tooling","title":"RtGam v0.2.0","text":"Update {primarycensoreddist} primarycensored match name change v0.6.0 release (#53) Automatically refer argument name error messages (#51) Add Dependabot GitHub Actions (#55) Error R CMD check NOTEs running CI (#57) Set default merge strategy NEWS.md union limit merge conflicts (#58) Added Justfile common development tasks (#56) Set automated spellcheck (#61) Add slash-command update WORDLIST PR (#64) Remove pre-commit hooks extraneous languages Add Justfile recipe locally update PR rebase (#75) Cancel -progress GitHub Actions runs subsequent push PR (#72) Set default merge strategy WORDLIST union limit merge conflicts (#78)","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/news/index.html","id":"rtgam-v010","dir":"Changelog","previous_headings":"","what":"RtGam v0.1.0","title":"RtGam v0.1.0","text":"initial release focuses establishing package’s foundation support future development. introduces basic functionality fitting returning models, setting essential components package initialization, documentation, continuous integration systems.","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/news/index.html","id":"features-0-1-0","dir":"Changelog","previous_headings":"","what":"Features","title":"RtGam v0.1.0","text":"Add package data simulated dataset Gostic, 2020 unit testing future benchmarking (#37) Display CI status README badges (#27) Initial working package, prepping input data, fitting model, returning RtGam object (#14) Specify internal data schema comprehensive input validation (#7)","code":""},{"path":"https://cdcgov.github.io/cfa-gam-rt/news/index.html","id":"bugs-0-1-0","dir":"Changelog","previous_headings":"","what":"Bugs","title":"RtGam v0.1.0","text":"Fix math rendering pkgdown (#36) Update pre-commit hooks template repository newest version (#25) Clean public docs (#26) Initial CI setup (#11)","code":""}]
